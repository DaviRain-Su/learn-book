# Makefile

makefile 关系到了整个工程的编译规则，一个工程中的源文件不计其数，并
按类型，功能、模块分分别放在若干目录中，makefile定义了一些列的规则来制定，
那些文件需要先编译，那些文件需要后编译，那些文件需要重新编译，甚至于进行
更复杂的功能操作，因为makefile就像一个shell脚本一样，其中也可以执行操作系统的命令。

makefile带来的好处就是自动化编译，一旦写好，只需要一个make命令，整个工程完全自动编译。
极大的提高了软件开发的效率。make是一个命令工具，是一个解释makefile中的命令工具。

先把源文件编译成中间文件，--> 编译。然后再把大量的中间文件合成执行文件，这个动作叫做链接。

编译时，编译器需要的是语法的正确，函数与变量的声明的正确。对于后者，你需要告诉编译器头文件的所在位置
（头文件中应该只有声明，而定义应该放在c/C++文件中），只要所有的语法正确，编译器就可以编译出中间文件。
一般来说，每个源文件都应该对应一个中间文件。

链接时，主要是链接函数和全局变量。所以，可以使用这些中间目标文件来链接我们的程序。
连接器不管函数所在的源文件，只管函数的中间目标文件。
在大多数时候，由于源文件太多， 编译生成的中间目标文件，而在链接时需要明显地指出中间目标文件名，这对于
编译很不方便所以需要给中间目标文件打包。

# Makefile介绍

规则：
1、如果这个工程没有编译过，那么我们的所有c文件都需要编译并链接。
2、如果这个工程的某几个c文件被修改，那么我们只编译修改的c文件，并链接目标程序。
3、如果这个工程的头文件被改变了，那么我们需要编译引用了这几个头文件的c文件，并链接目标程序。

make命令会自动智能地根据当前的文件修改的情况来确定那些文件需要重新编译，从而自动编译所需要的文件和链接目标程序。


## makefile 的规则

target ... : prerequisites ...
    command 
    ...
    ...

target 可以是一个object file目标文件，也可以是一个执行文件，还可以是一个标签（label），

prerequisites生成该target所依赖的问阿金和或target

commmand该target要执行的命令（任意的shell命令）
这是一个文件的依赖关系，target这一个或多个目标问阿金依赖与prerequies中的文件，其生成规则定义在command中，

prerequistes中如果有一个以上的文件比target文件要新的话，command所定义的命令就会被执行。

make会比较target文件和prerequies文件的修改日期，如果preprequisties文件的日期要比target文件的日期要新，或者
target不存的话，那么，make就会执行后续定义的命令。



make的隐晦规则。
.PHONY 表示clean是一个伪目标文件



.PHONY : clean
clean :
    -rm edit $(objects)
rm命令前面加了一个小减号的意思是，也许某些文件出现问题，但不管，继续做后面的事。

不成文的规矩， clean从来都是放在文件的最后


# makefile 有什么

makefile 里主要包含了5个东西：显示规则，隐晦规则，变量定义，文件指示和注释。



